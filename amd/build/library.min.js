define(["jquery","core/config","core/log"],function(a,b,c){var d={init:function(b){that=this,a(".resourceitem").hover(function(){a(this).css("background-color","#fcfcfc")},function(){a(this).css("background-color","#f8f8f8")}),a(".sharedresource-toggle-handle").bind("click",d.toggle_info_panel),a(".sharedresource-mark-like").on("click","",b,d.ajax_mark_like),a(".sharedresource-actionlink").bind("click",d.integrate),c.debug("ADM Shared resource Library JS initialized")},ajax_mark_like:function(c){residentifier=a(this).attr("id").replace("sharedresource-",""),url=b.wwwroot+"/local/sharedresources/ajax/add_liked_mark.php?",url+="resid="+residentifier+"&repo="+c.data,newlike=a.get(url,"",function(b,c){a("#sharedresource-likes-"+residentifier).html(that.sharedresource_print_stars(b,15))},"html")},sharedresource_print_stars:function(a,c){for(str="",i=0;i<c;i++)icon=i<a?"star":"star_shadow",pixicon=b.wwwroot+"/local/sharedresources/pix/"+icon+".png",str+='<img src="'+pixicon+'" />';return str},toggle_info_panel:function(b){that=a(this),imgid=that.find("img").attr("id"),residentifier=imgid.replace("sharedresource-toggle-",""),"none"===a("#sharedresource-info-"+residentifier).css("display")?(a("#sharedresource-info-"+residentifier).css("display","block"),iconsrc=a("#sharedresource-toggle-"+residentifier).attr("src"),iconsrc=iconsrc.replace("right","top"),a("#sharedresource-toggle-"+residentifier).attr("src",iconsrc)):(a("#sharedresource-info-"+residentifier).css("display","none"),iconsrc=a("#sharedresource-toggle-"+residentifier).attr("src"),iconsrc=iconsrc.replace("top","right"),a("#sharedresource-toggle-"+residentifier).attr("src",iconsrc))},integrate:function(){var b=a(this),c=b.attr("id").match(/id-(\w+)-(\d+)/);command=c[1],ix=c[2],document.forms["add"+ix].mode.value=command,document.forms["add"+ix].submit()}};return d});