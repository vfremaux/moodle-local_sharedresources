{"version":3,"file":"search.min.js","sources":["../src/search.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n *\n * @module     local_sharedresource/library\n * @package    local\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n// jshint unused: true, undef:true\ndefine(['jquery', 'core/log', 'core/str'], function ($, log, str) {\n\n    var sharedresourcessearch = {\n\n        strs: [],\n\n        init: function() {\n\n            var stringdefs = [\n                {key: 'moreoptions', component: 'local_sharedresources'}, // 0\n                {key: 'lessoptions', component: 'local_sharedresources'}, // 1\n            ];\n\n            str.get_strings(stringdefs).done(function(s) {\n                sharedresourcessearch.strs = s;\n            });\n\n            $('.selectmultiple-selectall').bind('click', this.selectall);\n            $('.selectmultiple-unselectall').bind('click', this.unselectall);\n            $('#sharedresources-search-reset-btn').bind('click', this.hardreset);\n            $('.shr-search-toggle-more').bind('click', this.togglemoreoptions);\n\n            log.debug('AMD sharedresource search form initialized');\n        },\n\n        toggle: function() {\n\n            var that = $(this);\n\n            var key = '#search-widget-' + that.attr('id');\n            if ($(key).css('display') == 'none') {\n                $(key).css('display', '');\n            } else {\n                $(key).css('display', 'none');\n            }\n        },\n\n        /**\n         * Select all options in a single multiselect widget.\n         */\n        selectall: function() {\n\n            var that = $(this);\n\n            var id = that.attr('id').replace('selectall-', '');\n            $('.selectmultiple-' + id).attr('checked', true);\n        },\n\n        /**\n         * Unselect all options in a single multiselect widget.\n         */\n        unselectall: function() {\n\n            var that = $(this);\n\n            var id = that.attr('id').replace('unselectall-', '');\n            $('.selectmultiple-' + id).attr('checked', true);\n        },\n\n        hardreset: function () {\n\n            var that = $(this);\n\n            that.closest('form').find(':input').not(':button, :submit, :reset, :hidden, :checkbox, :radio').val('');\n            that.closest('form').find(':checkbox, :radio').prop('checked', false);\n            that.closest('form').submit();\n        },\n\n        togglemoreoptions: function() {\n            var that = $(this);\n            var id = that.attr('id').replace('shr-search-toggle-more-', '');\n            $('#selectall-morevalues-' + id).toggleClass('hidden');\n            if ($('#selectall-morevalues-' + id).hasClass('hidden')) {\n                that.addClass('more');\n                that.removeClass('less');\n                $('#shr-search-toggle-more-' + id + ' span').html(sharedresourcessearch.strs[0]);\n            } else {\n                that.removeClass('more');\n                that.addClass('less');\n                $('#shr-search-toggle-more-' + id + ' span').html(sharedresourcessearch.strs[1]);\n            }\n        }\n    };\n\n    return sharedresourcessearch;\n});"],"names":["define","$","log","str","sharedresourcessearch","strs","init","get_strings","key","component","done","s","bind","this","selectall","unselectall","hardreset","togglemoreoptions","debug","toggle","attr","css","id","replace","that","closest","find","not","val","prop","submit","toggleClass","hasClass","addClass","removeClass","html"],"mappings":";;;;;;AAsBAA,OAAO,+BAAA,CAAC,SAAU,WAAY,aAAa,SAAUC,EAAGC,IAAKC,KAEzD,IAAIC,sBAAwB,CAExBC,KAAM,GAENC,KAAM,WAOFH,IAAII,YALa,CACb,CAACC,IAAK,cAAeC,UAAW,yBAChC,CAACD,IAAK,cAAeC,UAAW,2BAGRC,MAAK,SAASC,GACtCP,sBAAsBC,KAAOM,CACjC,IAEAV,EAAE,6BAA6BW,KAAK,QAASC,KAAKC,WAClDb,EAAE,+BAA+BW,KAAK,QAASC,KAAKE,aACpDd,EAAE,qCAAqCW,KAAK,QAASC,KAAKG,WAC1Df,EAAE,2BAA2BW,KAAK,QAASC,KAAKI,mBAEhDf,IAAIgB,MAAM,6CACb,EAEDC,OAAQ,WAEJ,IAEIX,IAAM,kBAFCP,EAAEY,MAEsBO,KAAK,MACX,QAAzBnB,EAAEO,KAAKa,IAAI,WACXpB,EAAEO,KAAKa,IAAI,UAAW,IAEtBpB,EAAEO,KAAKa,IAAI,UAAW,OAE7B,EAKDP,UAAW,WAEP,IAEIQ,GAFOrB,EAAEY,MAECO,KAAK,MAAMG,QAAQ,aAAc,IAC/CtB,EAAE,mBAAqBqB,IAAIF,KAAK,WAAW,EAC9C,EAKDL,YAAa,WAET,IAEIO,GAFOrB,EAAEY,MAECO,KAAK,MAAMG,QAAQ,eAAgB,IACjDtB,EAAE,mBAAqBqB,IAAIF,KAAK,WAAW,EAC9C,EAEDJ,UAAW,WAEP,IAAIQ,KAAOvB,EAAEY,MAEbW,KAAKC,QAAQ,QAAQC,KAAK,UAAUC,IAAI,wDAAwDC,IAAI,IACpGJ,KAAKC,QAAQ,QAAQC,KAAK,qBAAqBG,KAAK,WAAW,GAC/DL,KAAKC,QAAQ,QAAQK,QACxB,EAEDb,kBAAmB,WACf,IAAIO,KAAOvB,EAAEY,MACTS,GAAKE,KAAKJ,KAAK,MAAMG,QAAQ,0BAA2B,IAC5DtB,EAAE,yBAA2BqB,IAAIS,YAAY,UACzC9B,EAAE,yBAA2BqB,IAAIU,SAAS,WAC1CR,KAAKS,SAAS,QACdT,KAAKU,YAAY,QACjBjC,EAAE,2BAA6BqB,GAAK,SAASa,KAAK/B,sBAAsBC,KAAK,MAE7EmB,KAAKU,YAAY,QACjBV,KAAKS,SAAS,QACdhC,EAAE,2BAA6BqB,GAAK,SAASa,KAAK/B,sBAAsBC,KAAK,IAErF,GAGJ,OAAOD,qBACX"}