define ("local_sharedresources/library",["jquery","core/config","core/log","core/str"],function(a,b,c,d){var f={strs:[],init:function init(b){d.get_strings([{key:"confirmresourceforcedeletion",component:"local_sharedresources"},{key:"confirmresourcedeletion",component:"local_sharedresources"}]).done(function(a){f.strs=a});var e=a(this);a(".resourceitem").hover(function(){e.css("background-color","#fcfcfc")},function(){e.css("background-color","#f8f8f8")});a(".sharedresource-toggle-handle").bind("click",this.toggle_info_panel);a(".sharedresource-mark-like").on("click","",b,this.ajax_mark_like);a(".sharedresource-actionlink").bind("click",this.integrate);a(".sharedresource.delete").bind("click",this.confirm);a(".sharedresource.force-delete").bind("click",this.confirm);c.debug("ADM Shared resource Library JS initialized")},ajax_mark_like:function ajax_mark_like(){var c=a(this).attr("id").replace("sharedresource-",""),d=c.split("-"),e=d[0],g=d[1],h=b.wwwroot+"/local/sharedresources/ajax/add_liked_mark.php?";h+="resid="+g+"&repo="+e;a.get(h,"",function(b){a("#sharedresource-likes-"+g).html(f.sharedresource_print_stars(b,15))},"html")},sharedresource_print_stars:function sharedresource_print_stars(a,c){for(var d="",e=0;e<c;e++){var f=e<a?"star":"star_shadow",g=b.wwwroot+"/local/sharedresources/pix/"+f+".png";d+="<img src=\""+g+"\" />"}return d},toggle_info_panel:function toggle_info_panel(){var b=a(this),c=b.attr("id"),d,e=c.replace("sharedresource-toggle-","");if("none"===a("#sharedresource-info-"+e).css("display")){a("#sharedresource-info-"+e).css("display","block");a("#sharedresource-social-"+e).css("display","block");d=a("#sharedresource-toggle-"+e).attr("src");d=d.replace("right","top");a("#sharedresource-toggle-"+e).attr("src",d)}else{a("#sharedresource-info-"+e).css("display","none");a("#sharedresource-social-"+e).css("display","none");d=a("#sharedresource-toggle-"+e).attr("src");d=d.replace("top","right");a("#sharedresource-toggle-"+e).attr("src",d)}},integrate:function integrate(){var b=a(this),c=b.attr("id").match(/id-(\w+)-(\d+)/),d=c[1],e=c[2];document.forms["add"+e].mode.value=d;document.forms["add"+e].submit()},confirm:function(a){function b(){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(b){var c=a(this),d=0;if(c.hasClass("delete")){d=1}if(!confirm(f.strs[d])){b.preventDefault();b.stopImmediatePropagation();return!1}})};return f});
//# sourceMappingURL=library.min.js.map
