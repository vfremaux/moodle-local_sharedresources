<<<<<<< HEAD
define(["jquery","core/config","core/log","core/str"],function(a,b,c,d){var e={strs:[],init:function(b){var f=[{key:"confirmresourceforcedeletion",component:"local_sharedresources"},{key:"confirmresourcedeletion",component:"local_sharedresources"}];d.get_strings(f).done(function(a){e.strs=a});var g=a(this);a(".resourceitem").hover(function(){g.css("background-color","#fcfcfc")},function(){g.css("background-color","#f8f8f8")}),a(".sharedresource-toggle-handle").bind("click",this.toggle_info_panel),a(".sharedresource-mark-like").on("click","",b,this.ajax_mark_like),a(".sharedresource-actionlink").bind("click",this.integrate),a(".sharedresource.delete").bind("click",this.confirm),a(".sharedresource.force-delete").bind("click",this.confirm),c.debug("ADM Shared resource Library JS initialized")},ajax_mark_like:function(){var c=a(this).attr("id").replace("sharedresource-",""),d=c.split("-"),f=d[0],g=d[1],h=b.wwwroot+"/local/sharedresources/ajax/add_liked_mark.php?";h+="resid="+g+"&repo="+f,a.get(h,"",function(b){a("#sharedresource-likes-"+g).html(e.sharedresource_print_stars(b,15))},"html")},sharedresource_print_stars:function(a,c){for(var d="",e=0;e<c;e++){var f=e<a?"star":"star_shadow",g=b.wwwroot+"/local/sharedresources/pix/"+f+".png";d+='<img src="'+g+'" />'}return d},toggle_info_panel:function(){var b,c=a(this),d=c.attr("id"),e=d.replace("sharedresource-toggle-","");"none"===a("#sharedresource-info-"+e).css("display")?(a("#sharedresource-info-"+e).css("display","block"),a("#sharedresource-social-"+e).css("display","block"),b=a("#sharedresource-toggle-"+e).attr("src"),b=b.replace("right","top"),a("#sharedresource-toggle-"+e).attr("src",b)):(a("#sharedresource-info-"+e).css("display","none"),a("#sharedresource-social-"+e).css("display","none"),b=a("#sharedresource-toggle-"+e).attr("src"),b=b.replace("top","right"),a("#sharedresource-toggle-"+e).attr("src",b))},integrate:function(){var b=a(this),c=b.attr("id").match(/id-(\w+)-(\d+)/),d=c[1],e=c[2];document.forms["add"+e].mode.value=d,document.forms["add"+e].submit()},confirm:function(b){var c=a(this),d=0;if(c.hasClass("delete")&&(d=1),!confirm(e.strs[d]))return b.preventDefault(),b.stopImmediatePropagation(),!1}};return e});
=======
/**
 * A general JS library for library display.
 * @module     local_sharedresource/library
 * @package    local
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_sharedresources/library",["jquery","core/config","core/log","core/str"],(function($,cfg,log,str){var sharedresourceslibrary={strs:[],init:function(args){str.get_strings([{key:"confirmresourceforcedeletion",component:"local_sharedresources"},{key:"confirmresourcedeletion",component:"local_sharedresources"}]).done((function(s){sharedresourceslibrary.strs=s}));var that=$(this);sharedresourceslibrary.courseid=args,$(".resourceitem").hover((function(){that.css("background-color","#fcfcfc")}),(function(){that.css("background-color","#f8f8f8")})),$("#resources").on("click",".sharedresource-toggle-handle",this.toggle_info_panel),$("#resources").on("click",".sharedresource-mark-like",this.ajax_mark_like),$("#resources").on("click",".sharedresource-actionlink",this.integrate),$("#resources").on("click",".sharedresource.delete",this.confirm),$("#resources").on("click",".sharedresource.force-delete",this.confirm),$("#resources").on("click",".shr-version",this.toversion),log.debug("ADM Shared resource Library JS initialized")},ajax_mark_like:function(){var arr=$(this).attr("id").replace("sharedresource-","").split("-"),repoid=arr[0],residentifier=arr[1],url=cfg.wwwroot+"/local/sharedresources/ajax/add_liked_mark.php?";url+="resid="+residentifier+"&repo="+repoid,$.get(url,"",(function(data){$("#sharedresource-likes-"+residentifier).html(sharedresourceslibrary.sharedresource_print_stars(data,15))}),"html")},sharedresource_print_stars:function(stars,maxstars){for(var str="",i=0;i<maxstars;i++){var icon=i<stars?"star":"star_shadow";str+='<img src="'+(cfg.wwwroot+"/local/sharedresources/pix/"+icon+".png")+'" />'}return str},toggle_info_panel:function(){var iconsrc,residentifier=$(this).attr("id").replace("sharedresource-toggle-","");"none"===$("#sharedresource-info-"+residentifier).css("display")?($("#sharedresource-info-"+residentifier).css("display","block"),$("#sharedresource-social-"+residentifier).css("display","block"),iconsrc=(iconsrc=$("#sharedresource-toggle-"+residentifier).attr("src")).replace("right","top"),$("#sharedresource-toggle-"+residentifier).attr("src",iconsrc)):($("#sharedresource-info-"+residentifier).css("display","none"),$("#sharedresource-social-"+residentifier).css("display","none"),iconsrc=(iconsrc=$("#sharedresource-toggle-"+residentifier).attr("src")).replace("top","right"),$("#sharedresource-toggle-"+residentifier).attr("src",iconsrc))},integrate:function(){var matches=$(this).attr("id").match(/id-(\w+)-(\d+)/),command=matches[1],ix=matches[2];document.forms["add"+ix].mode.value=command,document.forms["add"+ix].submit()},confirm:function(e){var strindex=0;if($(this).hasClass("delete")&&(strindex=1),!confirm(sharedresourceslibrary.strs[strindex]))return e.preventDefault(),e.stopImmediatePropagation(),!1},toversion:function(e){var that=$(this),versionid=that.attr("data-version"),containerid=that.attr("data-container"),arr=(that.attr("data-container"),containerid.split("-")),repoid=arr[0],waiter=(arr[1],'<div class="shr-waiter"><img src="'+cfg.wwwroot+'/pix/i/ajaxloader.gif"></div>'),url=cfg.wwwroot+"/local/sharedresources/ajax/get_version.php";url+="?resid="+versionid,url+="&repo="+repoid,url+="&courseid="+sharedresourceslibrary.courseid,url+="&isediting="+$("#resources").hasClass("is-editing"),$("#shr-container-"+containerid).html(waiter),$.get(url,(function(data){$("#shr-container-"+containerid).html(data),$("#shr-container-"+containerid).attr("id","shr-container-"+repoid+"-"+versionid)}),"html")}};return sharedresourceslibrary}));

//# sourceMappingURL=library.min.js.map
>>>>>>> MOODLE_401_STABLE
